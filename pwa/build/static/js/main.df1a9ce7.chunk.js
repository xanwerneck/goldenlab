(this.webpackJsonppwa=this.webpackJsonppwa||[]).push([[0],{144:function(e,t,n){},322:function(e,t,n){"use strict";n.r(t);var a=n(3),o=n(2),c=n.n(o),i=n(30),r=n.n(i),s=(n(144),n(38)),l=n(138),u=n(17),d=n(89),j="A@MBEV2020",h=n(13),b=n(18),p=n(20),g=n(19),m=n(9),O=(c.a.Component,n(75)),f=(n(219),n(220),O.a.initializeApp({apiKey:"AIzaSyC1SYnP3iho6mZT_es0te1U3psva3pUlD4",authDomain:"malte-goldenlab.firebaseapp.com",projectId:"malte-goldenlab",storageBucket:"malte-goldenlab.appspot.com",messagingSenderId:"325629539566",appId:"1:325629539566:web:685e1879366d528e56efff"}),O.a.firestore()),v=O.a.auth(),x=function e(){Object(h.a)(this,e)};x.Login=function(e,t,n){v.signInWithEmailAndPassword(e,t).then((function(e){var t;t=e.user.getIdToken(),localStorage.setItem(j,t),n(!0)})).catch((function(e){n(!1)}))},x.Logout=function(){v.signOut()};var y=function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).login=function(){x.Login(a.state.email,a.state.senha,(function(e){e&&a.props.history.push("/inicio")}))},a.state={email:"",senha:""},a}return Object(b.a)(n,[{key:"render",value:function(){var e=this;return Object(a.jsxs)(m.j,{children:[Object(a.jsx)("div",{style:{textAlign:"center"},children:Object(a.jsx)("img",{src:"/images/logo-horizontal.jpg",width:"96",style:{borderRadius:10}})}),Object(a.jsxs)("div",{style:{marginTop:"20vh"},children:[Object(a.jsx)("h1",{style:{color:"#2b0600",marginBottom:30},children:"Login"}),Object(a.jsxs)(m.k,{children:[Object(a.jsxs)(m.l,{children:[Object(a.jsx)("label",{htmlFor:"#email",children:"E-mail"}),Object(a.jsx)(m.m,{id:"#email",placeholder:"E-mail",onChange:function(t){return e.setState({email:t.target.value})}})]}),Object(a.jsxs)(m.l,{children:[Object(a.jsx)("label",{htmlFor:"#password",children:"Senha"}),Object(a.jsx)(m.m,{type:"password",id:"#password",placeholder:"Password",onChange:function(t){e.setState({senha:t.target.value})}})]})]}),Object(a.jsx)(m.b,{pill:!0,block:!0,style:{backgroundColor:"#8c0406",border:0},onClick:function(){return e.login()},children:Object(a.jsx)("strong",{children:"Entrar"})})]})]})}}]),n}(c.a.Component),k=n(25),C=n(24),S=n(57),D=function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).sair=function(){localStorage.removeItem(j),a.props.goLogin()},a.toggleDropdown=a.toggleDropdown.bind(Object(S.a)(a)),a.toggleNavbar=a.toggleNavbar.bind(Object(S.a)(a)),a.state={dropdownOpen:!1,collapseOpen:!1},a}return Object(b.a)(n,[{key:"toggleDropdown",value:function(){this.setState(Object(s.a)(Object(s.a)({},this.state),{dropdownOpen:!this.state.dropdownOpen}))}},{key:"toggleNavbar",value:function(){this.setState(Object(s.a)(Object(s.a)({},this.state),{collapseOpen:!this.state.collapseOpen}))}},{key:"render",value:function(){var e=this;return Object(a.jsxs)(m.n,{type:"dark",expand:"md",style:{backgroundColor:"#ffffff"},children:[Object(a.jsx)(m.o,{href:"#",children:Object(a.jsx)("img",{src:"/images/logo.jpg",width:"65",style:{borderRadius:10}})}),Object(a.jsx)(m.p,{onClick:this.toggleNavbar}),Object(a.jsx)(m.b,{onClick:function(){return e.sair()},style:{backgroundColor:"#ffffff",border:0},children:Object(a.jsx)(C.a,{icon:k.e,style:{color:"#8C0406",fontSize:20}})})]})}}]),n}(c.a.Component),w=function e(){Object(h.a)(this,e)};w.getDataList=function(e,t){f.collection(e).get().then((function(e){var n=[];e.forEach((function(e){n.push({key:e.id,value:e.data()})})),t(n)})).catch((function(e){console.log(e),console.log("Erro recuperando os dados"),t([])}))},w.get=function(e,t,n){f.collection(e).doc(t).get().then((function(e){n(e.data())})).catch((function(e){console.log("Erro recuperando os dados"),n([])}))},w.update=function(e,t,n,a){f.collection(e).doc(t).set(n).then((function(e){a(!0)})).catch((function(e){a(!1)}))},w.pushData=function(e,t,n){f.collection(e).add(t).then((function(e){n(e.id)})).catch((function(e){console.log("Erro ao incluir dados"),n(null)}))},w.remove=function(e,t){return f.ref(t+"/"+e).remove()};var q=function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).resolver=function(){var e=a.props.document;e.value.resolvido=!0,w.update("ocorrencias",e.key,e.value,(function(){a.setState({resolvido:!a.state.resolvido})}))},a.state={resolvido:!1},a}return Object(b.a)(n,[{key:"render",value:function(){var e=this;return Object(a.jsx)("div",{style:{marginBottom:15,maxWidth:"100%"},children:Object(a.jsxs)(m.q,{children:[Object(a.jsx)(m.i,{lg:"10",xs:"10",children:Object(a.jsx)(m.c,{style:{height:44},children:Object(a.jsx)(m.d,{style:{padding:10},children:Object(a.jsxs)(m.q,{children:[Object(a.jsx)(m.i,{xs:"7",children:Object(a.jsxs)("strong",{children:["#",this.props.categoria]})}),Object(a.jsx)(m.i,{xs:"5",children:this.props.data})]})})})}),Object(a.jsx)(m.i,{lg:"2",xs:"2",style:{padding:0},children:this.props.resolvido||this.state.resolvido?Object(a.jsx)(m.b,{theme:"success",style:{height:44},children:Object(a.jsx)(C.a,{icon:k.c})}):Object(a.jsx)(m.b,{onClick:function(){return e.resolver()},theme:"light",style:{height:44},children:Object(a.jsx)(C.a,{icon:k.c})})})]})})}}]),n}(c.a.Component),M=n(58),T=n(136),I=n.n(T),P=(n(323),function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).onPlay=function(){var e=setInterval((function(){var e=I()("video-pallet","png");(new FormData).append("image",e.blob,"pallet.".concat(e.format)),fetch("https://malte-ambev.herokuapp.com/monitoramento/api/image",{method:"POST",body:JSON.stringify({image:e.dataUri.replace("data:image/png;base64,","")}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){if("NOT OK"==e.message){(new Date).getTime();w.pushData("ocorrencias",{descricao:"Pallet com defeito",maquina:"Despalitizadora",resolvido:!1,data_ocorrencia:new Date},(function(e){console.log(e)}))}a.setState({results:[].concat(Object(M.a)(a.state.results),[e])})})).catch((function(e){a.setState({results:[].concat(Object(M.a)(a.state.results),[e])})}))}),9e3);a.setState({interval:e})},a.onPause=function(){clearInterval(a.state.interval)},a.state={interval:0,results:[]},a}return Object(b.a)(n,[{key:"render",value:function(){var e=this;return Object(a.jsxs)(m.j,{children:[Object(a.jsx)(m.c,{style:{marginTop:20},children:Object(a.jsx)(m.d,{children:Object(a.jsx)("video",{width:"100%",controls:!0,autoPlay:!0,id:"video-pallet",onPlay:function(){return e.onPlay()},onPause:function(){return e.onPause()},children:Object(a.jsx)("source",{src:this.props.video,type:"video/mp4"})})})}),Object(a.jsx)("div",{style:{marginTop:20},children:this.state.results.map((function(e,t){return Object(a.jsx)("div",{children:"OK"==e.message?Object(a.jsx)(m.a,{theme:"light",children:"Pallet OK"}):Object(a.jsxs)(m.a,{theme:"warning",children:[Object(a.jsx)("strong",{children:"Erro! "})," Foi identificado um pallet com defeito na linha de produ\xe7\xe3o"]})},t)}))}),Object(a.jsx)("div",{style:{margin:15,marginTop:30},children:Object(a.jsx)(m.b,{pill:!0,block:!0,style:{backgroundColor:"#8C0406",border:0,fontSize:20},onClick:function(){return e.props.goBack()},children:Object(a.jsx)(C.a,{icon:k.a})})})]})}}]),n}(c.a.Component)),B=n(56),$=(n(60),function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).state={ocorrencias:[],maquinas:[]},a}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this;w.getDataList("ocorrencias",(function(t){var n;n=t.filter((function(e){if(!e.value.resolvido)return e})),e.setState({ocorrencias:n})})),w.getDataList("maquinas",(function(t){e.setState({maquinas:t})}))}},{key:"render",value:function(){var e=this;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(D,{goLogin:function(){return e.props.history.push("/login")}}),Object(a.jsx)("h4",{style:{margin:20},children:"Desvios na opera\xe7\xe3o"}),Object(a.jsx)("div",{style:{margin:15},children:this.state.ocorrencias.map((function(e,t){return Object(a.jsx)(q,{categoria:e.value.descricao,data:Object(B.mascaraData)(e.value.data_ocorrencia),resolvido:e.value.resolvido,document:e})}))}),Object(a.jsx)("h4",{style:{margin:20},children:"Maquin\xe1rio"}),Object(a.jsx)("div",{style:{margin:15},children:Object(a.jsx)(m.q,{children:this.state.maquinas.map((function(t,n){return Object(a.jsx)(m.i,{xs:"6",children:Object(a.jsx)(m.c,{onClick:function(){return e.props.history.push("/maquina",{maquina:t})},children:Object(a.jsxs)(m.d,{children:[Object(a.jsx)(m.g,{src:t.value.image,style:{maxWidth:"100%"}}),Object(a.jsx)("p",{style:{fontSize:12,marginTop:15},children:t.value.nome})]})})})}))})}),Object(a.jsxs)("div",{style:{margin:15,marginTop:30},children:[Object(a.jsx)(m.b,{pill:!0,block:!0,onClick:function(){return e.props.history.push("/chatbot")},style:{backgroundColor:"#8C0406",border:0,borderRadius:20,fontSize:20},children:Object(a.jsxs)(m.q,{children:[Object(a.jsx)(m.i,{style:{marginTop:10},children:Object(a.jsx)(C.a,{icon:k.d})}),Object(a.jsx)(m.i,{children:Object(a.jsx)("div",{class:"typewriter",children:Object(a.jsx)("h1",{children:"Oi... Quer alguma ajuda?"})})})]})}),Object(a.jsx)(m.b,{pill:!0,block:!0,onClick:function(){return e.props.history.push("/painel")},style:{backgroundColor:"#333333",border:0,borderRadius:20,fontSize:20},children:Object(a.jsxs)(m.q,{children:[Object(a.jsx)(m.i,{style:{marginTop:10},children:Object(a.jsx)(C.a,{icon:k.b})}),Object(a.jsx)(m.i,{children:Object(a.jsx)("div",{class:"painel",children:Object(a.jsx)("h1",{children:"Me leva para o painel"})})})]})})]})]})}}]),n}(c.a.Component)),E=function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).state={maquina:null},a}return Object(b.a)(n,[{key:"componentDidMount",value:function(){this.setState({maquina:this.props.location.state.maquina})}},{key:"render",value:function(){var e=this;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(D,{goLogin:function(){return e.props.history.push("/login")}}),Object(a.jsxs)(m.j,{children:[this.state.maquina?Object(a.jsxs)(m.c,{style:{borderRadius:0},children:[Object(a.jsx)(m.g,{src:this.state.maquina.value.image}),Object(a.jsxs)(m.d,{children:[Object(a.jsx)(m.h,{children:this.state.maquina.value.nome}),Object(a.jsx)("p",{children:this.state.maquina.value.descricao})]}),Object(a.jsxs)(m.e,{children:["Esta m\xe1quina est\xe1 em opera\xe7\xe3o h\xe1 ",Object(a.jsx)("strong",{children:Object(B.calculaTempo)(this.state.maquina.value.inicio_operacao)})]})]}):null,Object(a.jsx)("div",{style:{margin:15,marginTop:30},children:Object(a.jsx)(m.b,{pill:!0,block:!0,style:{backgroundColor:"#8C0406",border:0,fontSize:20},onClick:function(){return e.props.history.goBack()},children:Object(a.jsx)(C.a,{icon:k.a})})})]})]})}}]),n}(c.a.Component),z=n(76),L=function(e){var t="https://api.wit.ai/message?v="+function(){var e=new Date;return e.getDate().toString()+(e.getMonth()+1).toString()+e.getFullYear().toString()}()+"&q="+encodeURIComponent(e);return fetch(t,{headers:{Authorization:"Bearer JINJ4P335NYV2Z5VPJCWGVWAHHVJCIJT"}})},_=function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).inputRef=c.a.createRef(),a.enviar=function(){if(""!=a.state.mensagem){var e=a.state.mensagem;a.props.addMensagem(e,"right"),a.setState({mensagem:""}),a.inputRef.clear(),L(e).then((function(e){return e.json()})).then((function(e){(console.log(e),0==e.intents.length)?a.props.addMensagem("N\xe3o consegui entender a sua mensagem, podemos tentar novamente?","left"):function(e,t){w.get("response_chatbot",e,t)}(e.intents[0].name,(function(e){console.log(e),e.link?(a.props.addMensagem("Olha o que eu achei, esse documento que pode ajudar voc\xea com essa d\xfavida, basta clicar nele para acessar.","left"),a.props.addMensagem(e.message,"left","file",e.link,e.nome_arquivo)):a.props.addMensagem(e.message,"left")}))}))}else alert("Informe a mensagem antes de submeter")},a.state={mensagem:""},a}return Object(b.a)(n,[{key:"render",value:function(){var e=this;return Object(a.jsxs)(m.c,{children:[Object(a.jsxs)(m.f,{children:[Object(a.jsx)(C.a,{icon:k.d}),"Assistente virtual do Malte"]}),Object(a.jsx)(m.d,{children:Object(a.jsx)(z.MessageList,{style:{height:100},className:"message-list",lockable:!0,toBottomHeight:"100%",dataSource:this.props.message_list,onClick:function(e){e.link&&window.open(e.link)}})}),Object(a.jsx)(m.e,{children:Object(a.jsx)(z.Input,{placeholder:"digite aqui a sua d\xfavida...",multiline:!0,value:this.state.mensagem,ref:function(t){return e.inputRef=t},onChange:function(t){return e.setState({mensagem:t.target.value})},rightButtons:Object(a.jsx)(z.Button,{onClick:function(){return e.enviar()},color:"white",backgroundColor:"black",text:"Enviar"})})})]})}}]),n}(c.a.Component),F=function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).addMensagem=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",i={position:t,type:n||"text",text:c||e,date:new Date,link:o};a.setState({message_list:[].concat(Object(M.a)(a.state.message_list),[i])})},a.state={message_list:[]},a}return Object(b.a)(n,[{key:"componentDidMount",value:function(){this.addMensagem("Bem-vindo, estou pronto...","left")}},{key:"render",value:function(){var e=this;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(D,{goLogin:function(){return e.props.history.push("/login")}}),Object(a.jsxs)(m.j,{children:[Object(a.jsx)(_,{message_list:this.state.message_list,addMensagem:this.addMensagem}),Object(a.jsx)("div",{style:{margin:15,marginTop:30},children:Object(a.jsx)(m.b,{pill:!0,block:!0,style:{backgroundColor:"#8C0406",border:0,fontSize:20},onClick:function(){return e.props.history.goBack()},children:Object(a.jsx)(C.a,{icon:k.a})})})]})]})}}]),n}(c.a.Component),N=function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).state={},a}return Object(b.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(m.j,{children:Object(a.jsx)(P,{video:"/videos/pallets.mp4",goBack:function(){return e.props.history.goBack()}})})})}}]),n}(c.a.Component),R=function(e){var t=e.component,n=Object(l.a)(e,["component"]);return Object(a.jsx)(u.b,Object(s.a)(Object(s.a)({},n),{},{render:function(e){return null!==localStorage.getItem(j)?Object(a.jsx)(t,Object(s.a)({},e)):Object(a.jsx)(u.a,{to:{pathname:"/",state:{from:e.location}}})}}))},A=function(){return Object(a.jsx)(d.a,{children:Object(a.jsxs)(u.d,{children:[Object(a.jsx)(u.b,{exact:!0,path:"/",component:y}),Object(a.jsx)(u.b,{exact:!0,path:"/login",component:y}),Object(a.jsx)(R,{path:"/inicio",component:$}),Object(a.jsx)(R,{path:"/maquina",component:E}),Object(a.jsx)(R,{path:"/chatbot",component:F}),Object(a.jsx)(R,{path:"/painel",component:N}),Object(a.jsx)(u.b,{path:"*",component:function(){return Object(a.jsx)("h1",{children:"Page not found"})}})]})})},J=function(){return Object(a.jsx)(A,{})};n(319),n(320),n(321);r.a.render(Object(a.jsx)(J,{}),document.getElementById("root"))},56:function(e,t){e.exports={mascaraCPF:function(e){return(e=(e=(e=(e=e.replace(/[^\d]/g,"")).replace(/(\d{3})(\d)/,"$1.$2")).replace(/(\d{3}).(\d{3})(\d)/,"$1.$2.$3")).replace(/(\d{3}).(\d{3}).(\d{3})(\d)/,"$1.$2.$3-$4")).replace(/(\d{3}).(\d{3}).(\d{3})-(\d{2})(\d)/,"$1.$2.$3-$4")},mascaraData:function(e){return(e=e.toDate()).getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear()},mascaraCep:function(e){return(e=e.replace(/[^\d]/g,"")).replace(/(\d{5})(\d{3})/,"$1-$2")},apenasNumeros:function(e){return e.replace(/[^\d]/g,"")},calculaTempo:function(e){var t=e.toDate(),n=new Date,a=Date.UTC(t.getYear(),t.getMonth(),t.getDate(),0,0,0)-Date.UTC(n.getYear(),n.getMonth(),n.getDate(),0,0,0);return(a=Math.abs(a/1e3/60/60))+Math.abs(n.getHours()-t.getHours())+" hrs   "+Math.abs(n.getMinutes()-t.getMinutes())+" min e "+Math.abs(n.getSeconds()-t.getSeconds())+" seg"}}},60:function(e,t,n){}},[[322,1,2]]]);
//# sourceMappingURL=main.df1a9ce7.chunk.js.map